# lab_task
## Подготовка к использованию
1. Открыть консоль
2. Склонировать репозиторий в выбранную директорию - команда: git clone https://github.com/nikitakostolomov/lab_task.git
4. Перейти в папку lab_task/app - команда: cd ..\lab_task\app
5. Создать виртуальное окружение - команда: python -m venv "название окружения", без кавычек
6. Активировать окружение - команда: "название окружения"\Scripts\activate, без кавычек
7. Установить зависимости - команда: pip install -e path\to\project\lab_task\app
8. Создать базу данных и таблицы - команда: migration
9. DONE
## Использование
### digger
Команда для заполнения базы данных информацией о книгах в формате fb2, fb2.zip и fb2.gz.  

Обязательный параметр:  

    dir_path: путь до директории с книгами  
Необязательные параметры:  

    --book_name, -a: Название книги. Если этого параметра нет, то база данных будет заполняться информацией о всех книгах в директории. Если параметр есть, то в базу данных попадет информация только об одной книге.
    --update, -f: Флаг. Если он есть, то информация книгах с одинаковым автором, названием и годом будет обновлена, иначе ничего не происходит.
Пример использования:  
Следующая команда заполнит базу данных информацией о каждой книге, находящейся в директории:  

    (venv) C:\Epam\lab_task\app>digger C:\Epam\Books  
Следующая команда заполнит базу данных информацией об одной книге, находящейся в директории:  

    (venv) C:\Epam\lab_task\app>digger C:\Epam\Books -a "Название книги"  
Следующая команда обновит информацию об одной книге, находящейся в директории:  

    (venv) C:\Epam\lab_task\app>digger C:\Epam\Books -a "Название книги" -u

### seeker
Команда для поиска книг по их автору, названию или году выпуска. Если опциональные параметры не указаны, то
будет выведена вся информация.  

Необязательные параметры:  

    -a, --author: Имя автора, если состоит из нескольких слов, то указать в кавычках
    -n, --book_name: Название книги, если состоит из нескольких слов, то указать в кавычках
    -y, --year: Год издания книги
    -s, --identifier: Если этот флаг есть, то будут получены id книг, иначе все поля  
Пример использования:  
Следующая команда выведет информацию о всех книгах с указанным автором и годом:  

    (venv) C:\Epam\lab_task\app>seeker -a "Имя автора" -y 2019  
    
Следующая команда выведет id всех книг: 

    (venv) C:\Epam\lab_task\app>seeker -s

### wiper  
Команда для удаления книги из базы данных по ее id. Если указан флаг -a, вся база данных будет очищена.  

Необязательные параметры:  

    -n, --number: id книги, которую требуется удалить
    -a, --delete_all: Если этот флаг указан, удаляет все записи из базы данных  
Пример использования:  

Следующая команда удалит информацию об одной книге с указанным id:  

    (venv) C:\Epam\lab_task\app>wiper -n 1  

Следующая команда удалит информацию о всех книгах, даже если указано id книги:  

    (venv) C:\Epam\lab_task\app>wiper -n 1  -a

## Утилита для доступа к базе данных  
Для удобства доступа к базе данных можно установить программу [DB Browser for SQLite](https://sqlitebrowser.org/dl/)  
В ней можно открыть базу данных и посмотреть на таблицы и данные.  
Чтобы открыть базу данных:
1. Откройте приложение DB Browser for SQLite
2. Нажмите откыть базу данных
3. Выберете директорию с базой данных - ../lab_task/app/db_and_migration/main.db